<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SISTEMA S.P.A. | GEST√ÉO ELITE</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #121212; --card: #1e1e1e; --text: #e0e0e0;
            --atritado: #ff5252; --analitico: #ffd740; --expresso: #40c4ff; --pragmatico: #69f0ae;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; }
        
        /* Status Online Pulsante */
        .status-online { display: flex; align-items: center; font-size: 0.7rem; color: var(--pragmatico); margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .dot { height: 8px; width: 8px; background-color: var(--pragmatico); border-radius: 50%; display: inline-block; margin-right: 5px; box-shadow: 0 0 8px var(--pragmatico); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .tma-badge { background: #1a3321; padding: 8px 15px; border-radius: 5px; color: var(--pragmatico); font-weight: bold; border: 1px solid var(--pragmatico); font-size: 0.8rem; }
        
        .grid-perfis { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 25px; }
        .btn-perfil { padding: 20px 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; text-transform: uppercase; font-size: 0.75rem; transition: 0.2s; }
        .btn-perfil:active { transform: scale(0.95); opacity: 0.8; }
        .atritado { background: var(--atritado); }
        .analitico { background: var(--analitico); }
        .expresso { background: var(--expresso); }
        .pragmatico { background: var(--pragmatico); }

        .card { background: var(--card); padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #555; }
        .metric-title { font-size: 0.9rem; margin-bottom: 10px; display: flex; justify-content: space-between; }
        .progress-bar { background: #333; border-radius: 10px; overflow: hidden; margin-bottom: 15px; height: 18px; }
        .progress-fill { height: 100%; transition: width 0.5s ease; }

        .charts-container { display: grid; grid-template-columns: 1fr; gap: 20px; }
        canvas { background: #1e1e1e; padding: 10px; border-radius: 10px; max-height: 280px; }
    </style>
</head>
<body>

<div class="status-online"><span class="dot"></span> Sistema Online - Captura em Tempo Real</div>

<div class="header">
    <div>
        <h2 style="margin:0; font-size: 1.4rem;">SISTEMA S.P.A.</h2>
        <small>Supervisor: Sidney (S. P. A.)</small>
    </div>
    <div class="tma-badge">TMA GERAL: 03:50</div>
</div>

<h3 style="color: #bbb; font-size: 0.9rem; margin-bottom: 15px;">TRIAGEM DE PERFIL (CLIQUE PARA COMPUTAR)</h3>
<div class="grid-perfis">
    <button class="btn-perfil atritado" onclick="registrarInput(0, 'ATRITADO', 'üî¥ ESCUTA ATIVA: Deixe desabafar. Use: \'Entendo sua frustra√ß√£o\'.')">Atritado</button>
    <button class="btn-perfil analitico" onclick="registrarInput(1, 'ANAL√çTICO', 'üü° SEGURAN√áA T√âCNICA: Explique o porqu√™ detalhadamente.')">Anal√≠tico</button>
    <button class="btn-perfil expresso" onclick="registrarInput(2, 'EXPRESSIVO', 'üîµ CONEX√ÉO: Retome o controle da chamada com educa√ß√£o.')">Expressivo</button>
    <button class="btn-perfil pragmatico" onclick="registrarInput(2, 'PRAGM√ÅTICO', 'üü¢ AGILIDADE: V√° direto ao ponto. Foco no FCR.')">Pragm√°tico</button>
</div>

<div class="card">
    <div class="metric-title"><span>LIBERADO (FCR/SLA OK)</span> <strong id="val-liberado">85%</strong></div>
    <div class="progress-bar"><div id="bar-liberado" class="progress-fill" style="width: 85%; background: var(--pragmatico);"></div></div>
    
    <div class="metric-title"><span>PENDENTE (OFENSOR TMA/NPS)</span> <strong id="val-pendente">15%</strong></div>
    <div class="progress-bar"><div id="bar-pendente" class="progress-fill" style="width: 15%; background: var(--atritado);"></div></div>
</div>

<div class="charts-container">
    <canvas id="chartPerfis"></canvas>
    <canvas id="chartTma"></canvas>
</div>

<script>
    let contagens = [35, 25, 40]; // Atritado, Anal√≠tico, Outros
    
    const ctxPizza = document.getElementById('chartPerfis').getContext('2d');
    let chartPerfis = new Chart(ctxPizza, {
        type: 'pie',
        data: {
            labels: ['Atritado', 'Anal√≠tico', 'Outros'],
            datasets: [{
                data: contagens,
                backgroundColor: ['#ff5252', '#ffd740', '#40c4ff'],
                borderWidth: 0
            }]
        },
        options: { 
            plugins: { 
                legend: { 
                    position: 'bottom', 
                    labels: { 
                        color: '#fff', 
                        font: { size: 12 },
                        padding: 15,
                        generateLabels: (chart) => {
                            const data = chart.data;
                            const total = data.datasets[0].data.reduce((a, b) => a + b, 0);
                            return data.labels.map((label, i) => ({
                                text: `${label}: ${Math.round((data.datasets[0].data[i] / total) * 100)}%`,
                                fillStyle: data.datasets[0].backgroundColor[i],
                                color: '#fff',
                                hidden: false,
                                index: i
                            }));
                        }
                    } 
                } 
            } 
        }
    });

    function registrarInput(index, perfil, msg) {
        contagens[index] += 1;
        chartPerfis.update();
        
        if(perfil === 'ATRITADO') {
            let p = parseInt(document.getElementById('val-pendente').innerText);
            if(p < 100) {
                p += 2;
                let lib = 100 - p;
                document.getElementById('val-pendente').innerText = p + "%";
                document.getElementById('bar-pendente').style.width = p + "%";
                document.getElementById('val-liberado').innerText = lib + "%";
                document.getElementById('bar-liberado').style.width = lib + "%";
            }
        }
        alert("DIRETRIZ " + perfil + ":\n\n" + msg);
    }

    new Chart(document.getElementById('chartTma'), {
        type: 'bar',
        data: {
            labels: ['Jo√£o', 'Maria', 'Pedro', 'Ana'],
            datasets: [{
                label: 'TMA Individual (Meta: 03:45)',
                data: [4.30, 3.15, 2.50, 3.55],
                backgroundColor: ['#ff5252', '#69f0ae', '#69f0ae', '#ffd740']
            }]
        },
        options: { plugins: { legend: { labels: { color: '#fff', font: { size: 10 } } } } }
    });
</script>

</body>
</html>
